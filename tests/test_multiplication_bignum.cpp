#include "include/bignum.hpp"
#include "gtest/gtest.h"

#include <limits>
TEST(Init, MultiplicationSimple) {
	UnsignedBigInt a = std::string("99");
	UnsignedBigInt b = std::string("99");
	UnsignedBigInt c = a * b;
	a *= b;

	ASSERT_EQ(a.to_string(), c.to_string());
	ASSERT_EQ(c.to_string(), "9801");
}

TEST(Init, MultiplicationCarry) {
	UnsignedBigInt a = std::numeric_limits<uint64_t>::max();
	UnsignedBigInt b = std::numeric_limits<uint64_t>::max();
	UnsignedBigInt c = a * b;
	a *= b;

	ASSERT_EQ(a.to_string(), c.to_string());
	ASSERT_EQ(c.to_string(), "340282366920938463426481119284349108225");
}

TEST(Init, AdditionLarge) {
	UnsignedBigInt a = std::string("897093897589049889899898345896737543125136989078342768914");
	UnsignedBigInt b = std::string("156346783789238972345123467823478976234512334513256790765");
	UnsignedBigInt c = a * b;
	a *= b;

	ASSERT_EQ(a.to_string(), c.to_string());
	ASSERT_EQ(c.to_string(),
			  "140257745645000872142616468868498922094060947798926726180220809091903011394329338806"
			  "698623469389850013443644279210");
}

TEST(Init, MultiplicationRepeated) {
	UnsignedBigInt a = std::string("823478831216357");

	for(size_t i = 0; i < 10; i++) {
		a *= a;
	}

	ASSERT_EQ(
		a.to_string(),
		"424715383391048570881282649857997795491686702064381593510167450783615773313118083762556162"
		"073736367362277670973391650860998987603590954140821587307595224994837548336436754668246229"
		"451070715005074591241778421778542363022061241803641569816153088480914147112529810934969252"
		"977248976421451393683366568678827152824497188102196630137646613347043770069941775895278077"
		"948147605303932036452966413944356728411645416519534278274107787886619452086569896362614500"
		"735229493792782309933690079927712199144924207198077366889992171439889530217506944706657782"
		"801243119291369200315657064380242606918347812600713663022677521654309424010943185318432566"
		"324110682325426681952100521805491230872951751071119290958843388871376999077531185903363619"
		"652285448082392687365686440031941615451467692076031030609171276810782137940817940372255570"
		"314966327764023301228033496320457426716644706151097113393225250315115544080617610839680224"
		"783934445766837520548265935195421188874222265882492073783072613770900981418308401754302975"
		"780473977673680121161061270122811722307782072096548921365335790732614677705798118816374649"
		"424777340309997099456534834668808101560494428760556269822379635582458979412771285157078892"
		"117381998509016567005128707313603721728353213233391335736844181087144887001456258803588252"
		"523396707310246721296556919766245914843706940800125013490925075254180449083349462926766495"
		"639660582319373094308819138683557345784163390905789681392353753376469362936544995862145126"
		"959309802140064258293563492364594485282088536898329090192927203184151866058902705295534581"
		"272558501389526171194269907005193047104598905426380036889916688844165499193934749724136613"
		"536815983017455504438814863435510973689977763092084017482656454887131762666598110239675049"
		"193416098584596346670072676304483959330769965764465373919576536185526158441927814854746276"
		"792012573036425140351894660546327019662666782722505247775533764774244940428888138925231963"
		"577819785525357683998382779176895015455533423157427592419124959886507961928017120489071448"
		"646183525685076397218066006905487322365406830341969153277327976051761360512575987343911695"
		"725593994385001386269997240988130733859517879041556359057300958260413954951191729808717256"
		"785408785990459268671161458466431433611512209930455826045277335301863566748306424893838807"
		"956256645338113667045799206521193053286805141693143537674996245717228103969149479469035763"
		"445731872606673650987068738833518295764947109243634226847373882776238156382689465612314864"
		"317729169527194323396798176072396164491915137990334364748420593324112523906424894098886183"
		"439987702001312680042674118476293172696438214944431834578636846967511440605794021142503529"
		"310003297411975787587339579243698693726883955205617429227358595017479330747093441035569982"
		"961529773908747481339240098791880518732302820465322206929746567070269714834512832164723868"
		"078870292284899848090006584541869756470177241442926667249867980867545670241395240198082029"
		"697606244220670821597061282979056305456205144714317987349005628376405273348835980953979189"
		"780551158149486502410212363955165969111780227806047420041757047319930414106937652181476909"
		"305316538401952525815262745443641436147898486144552983130159886239981522907024750416989698"
		"517759160222253346958775587788935564171196848536142291782205661040792037235804386871484847"
		"419361607449629619498752614649178464805019479782153777370901834857268450095936842035057365"
		"544478772979529161863842555301526510833683680250452164236793077942147699592191292868518990"
		"428206322406740487752116914206988966057719612385777806636934804108130754681313041777711384"
		"097307946828853322898163590536379707062259708898076137964143284430388920646294279884728715"
		"246276370418655024132327398848737765591032516063283517094289367454166266984686103513743754"
		"801115817918229984190746108202075194915632076269727865253713259988579008503239196782942059"
		"400511004643840136898513618987599400635829277014373190083500435745435013638476370128064406"
		"495822358724811847472800334405930759702153615580586652130288125095270904219339593831091405"
		"924060383218868982053877047281346960080047916520830079003309284750758218044002517938609342"
		"353893303236934318660848763757722269807017043150590450776117402114551094129951339453024770"
		"114844175135435017691677528129297405607801758656938911480351331643407526731106829224113432"
		"727045117153820176022314364667141193754009545361120656075729565123541708683028437238127809"
		"254481645746055215979124478671784390866594402861162261020000571121610515849948807269609380"
		"383865572757786547602156347163909393262684533395267672288165905844162050177961623315266953"
		"349127133654387073908658827842581501835109663373242318616312316409005052524828909016667165"
		"587310998890358093138954544631783016461243113830274872363330515318569023548830351442839327"
		"378573158958060077530669604406716911453667888273584298613582948998238263505034358186144340"
		"933447910549819745411326990725947312335426753093037279973815148254850968434489435813142305"
		"687226550917486199844246104608011110275862620155648111312432105103200246188512452387598158"
		"174896842900871073049555990486228741291153568972708863954418198261310747077552072634239284"
		"254821410010432077678104479843282208011257319442685470702373268240651582050327375200645856"
		"788206271103645264604427382147684816683641132741784456259598113770714451193465764133143091"
		"567693156753218295952343135482747457312127132620280710309550304936507536026176121980178331"
		"010724221994913865202219852724403039564220096825098859687961709988839265554248836328586083"
		"888578058983007187623190931304400968233730074647418035793613615778542427522160993055478717"
		"878826450252490563477739563060270044357211278378795519842742561005924735930299071098056504"
		"258344220926950646284388569688201386933007470943423478703920685284403351402077452580347627"
		"168875337974541756116928219583286475982829505042628962981379677870147622480796816484954073"
		"781762307038322340246961758115657473175793478601825107667036752037570915090476354001790507"
		"266252545311952776947941562907058930463937349942664589594828062128267161109404322672588661"
		"594680751001243920957523314782835744685270393465635577878869509552658650307497353918292934"
		"224614708380897523925318706228751946842038159650566425665291880177424091691970029500813335"
		"224547382764561517566406303809557188399033377516916657652367040570935076585379716653740854"
		"084901996178671148586288565130639736104758278531760323370993442693851665896157556341557763"
		"805158106596288055857405908327835169595330557924937984005491669917390258650782996626705135"
		"340466134391258784964819262331183533009166490720362130308954206139296324389992277766535818"
		"551833762853521880174570008324535624462103514939998185800636795164668828858034785022467458"
		"660335061841946216401756886667787278155114099951572420238495142298551117650300312518539656"
		"531037428580779134089382271776010841014623872562315733890904651092775703877833719516088949"
		"050187358092108059302064197835878930326137067067543748472885882137402737987638189513676298"
		"209022609960811100224520756493605435416652037879055838230877127451009533950555771794368657"
		"921602942068120012232998500411079209616429061934412295134001711081592248427216116440493990"
		"952337952640624203918911171668911475110138503094176381521720874119466764024673908094807776"
		"829570942372089506158109304105858863213196397182308108507621020400824533474175146215537043"
		"838011802125661981191013204446327075750148544377973341548765460787395817885916590960519459"
		"876180250177233270154590241277772656588774297981786453622377512710924596073115784395395796"
		"212959001964460945542600053697361150882799919790401645278453875180491012235379400494341892"
		"924096260598760876816503006539846463763744325361395773031519870184886183975745179583879421"
		"413241276375862957798855791946040901467553421435132309206737846976127913746900547400283810"
		"816275226668413032488744905113243202879525310045862957819242341997268343746485016800754385"
		"856954147517068566919944793206569690421478114114863140571808382429223814842939380959905171"
		"520063109738266810254619134475274808213022506291934195235511138204568328125114933438778221"
		"383092775503003361901879961676867616756114463601712742281378593105319262730764681627050957"
		"058196203010043774915884532608563211862763752168197611801489106707359265071034483002492794"
		"631054916777062767786165157298918894584587318691482687353476938301622802560360153374336987"
		"165185167528818043720641754056447840743038574274430734616503968710577375323270640916446074"
		"803525973039689360419106914342721392696559902012677265249628334976729590942324822037294883"
		"056152251172893444053368683273482298381476432439654363963990878473433447657876771900794153"
		"829932684687263336113895317226656344650164241996059994785476713718756414592366655278040467"
		"169222032891781416276918865286038897445380544462543169966801485003804956052946256200737757"
		"062498837164168120249339643306102188009852388900015670257928784865399264253033729353395398"
		"979491696601513083358314293091122590375732955194927437373941529093890351145238616436228127"
		"757757307401362081185945677750382782598183295642254902358515535466427889762200809058674353"
		"402368148950469746569370942553045916004491641848189657016922097325674618316177389604123262"
		"065030376397158158852163941603014888888422528521323441256942747942419339296429736885665885"
		"361590713010358902585902805289452612970240052881057693008206358671261917195754983960090438"
		"615877882835584142265421653849481822811726107186329890430610405707246778499664315509764543"
		"818220608630416925558188767223418379881217113446619889675368371240746329558558733029534060"
		"870967037329017555521645603602439074139067778310460536246378738390947922357153185458118845"
		"463889326179809446064847538998664817722964313108729846433981515380183823734558838586837676"
		"856540915533096642498414964811687123796387344632154373055074445728360318771257628965096543"
		"520354032779756291207232353496778653313780552754943566993752403298008127581446104403929809"
		"454590699458341976733111008367707992621628474110489192438579757545555090890146833737624381"
		"648840357732114389681184352169211846485736327706679414467904673648791593516390614326661143"
		"659341580430647593941964752656936434008262735512749555654287353392863263133332404111305598"
		"821558298097905671861900250971968767744527066088609600952017722376839567433078418637281404"
		"350778909014767937426358828771573664160828700485992760393267263487373980067109972646249130"
		"859536971356294304375187136006759297101444524033143902000837570426370057206366820499350448"
		"969855996466737576085497685670475648393511874323560680455335193287479669426920128015299192"
		"517688908836777868776683370636185067143561507488970277608365050476064648842161160377714825"
		"221371467418013912459113744984460116508563072131249733272668323394835046857179161549447174"
		"619534300845652513436843751675110905996187947500721062309981831264620978716290140528176856"
		"695916739388398393725214496136741161378714484542811880311029607642701321380364215220927488"
		"332487712318694841100364376833158558847789371386494743645930878749204571567508925515640226"
		"012928175634978295873128996065099314843447734574461479663784890220179161658882444844171725"
		"064222320357897061632425700405374903411995193835475220268155707339332420064939700542062155"
		"270959907898583398129223002683504198585286677243352280390096988035960178486922696743678867"
		"400908506549443522034671241404243740068710737700039986377009986023306341765874041065054189"
		"408167932039910366778734833992548530269346559486620922197252034634389982925224461293084261"
		"156441459340247364142422699140776264453128560252149227256337858115570050173893144503887895"
		"688024645717792357501422574206262434880525227011438175140173003976423843376870825565402509"
		"223034283319379178548482311946025054638669588093884046152034787055956822940532700012103058"
		"698057106255820841133245103404428832976082723139466275966827696735619598798116215135504641"
		"920025177278230018778373090811357994742861638130542615571310477930981400881763787181339351"
		"550874444588085349169076155003904552338067087206178519140205416811567662143100556970055297"
		"635500232633066890124654062804235198194769182312065439131575590711837999901372680674319863"
		"623896307601823509676284187783831026603658481882898292834508599937133736551514331949137056"
		"549063312191471850138897083254307618036151679553632769548848855975244684032522762630846899"
		"276941261680491349495724330742367805117409112212474255838246800653005806634036779501988886"
		"617036598363494004730978763635634945697220471875740315605238992384153114036341354664330593"
		"502266665539926080731926555018170176782644187554600643198159703850606166624474731666758545"
		"572012253378620615404155369737094507578954351525031129750729288824445799358405716720839380"
		"124782093143654296322923822616044549969922917235480168210166627738618308056513442939210556"
		"950425560127337364298716276479442641177768917998678342573726780693031164022901431458887915"
		"738621636885913090926114067261731053488078833099970477852134375319681607518349243241961931"
		"914971683471616067008876526534077238033970867789591130925126185282364398095308495458381310"
		"890495290559512846364654111475264258830147809154881465416803357640999895393629276311688132"
		"182472656000842162821059526129811754329101639367355058781017566275999102360534891618337184"
		"709932416475057891083223727986221726474344116860313005797074183490828482825809329291709614"
		"876027809420887037601080513849405306656544206154303868242128960658564525810508086360987905"
		"134068000238291896096632643244407701086909477983172006504807121435695814465206481456172242"
		"186987462398249079794868185166295184803056544003928929418784507502079145833716824588173101"
		"787835336336232870972617433712689784714732930767579800224163654967325354695957262350723952"
		"350723057567300509524589017560912937216109794852178828881190940374968887143891771004132722"
		"498350655232609966708549326009144870147750215160376668996253766635728401287670712063401388"
		"304105757080547673311944093456843647921542540298879016089208702768791242266837257048674280"
		"117222299865319294398518085149384354525162555714091788464237220770763042637573663338709869"
		"003807248493746017797181396829148990782178741736931698735772284172662584710490790581850987"
		"404284432699873355129112966218347582007738591164140723908166366805399568332724900171514318"
		"766570720429764648336279214616504608143328690319021894036993198218370742386088819486591297"
		"544780226641172445263637288567714960208522497613677560887414249270450247456385215568662695"
		"340772838282156369949088237749777797786925759114526919736388028718237537946904447210542762"
		"809946073998401576497229822223391433607219964390665996928084253980414606687828117877922644"
		"856322895276527799758327726540951225362921029610025471142284040349560644732728041895009713"
		"500331453287302184429977495666814741873316968419126418254866925477167678559273475475022684"
		"325535539244197640272788120544790699747820230920011901714260704379703327487768680995135657"
		"515087313604791454921221299553344915264018766771742237942697780684182376940614145913610351"
		"522688495520988233600099820345452165258155078841904074434696340139331697281204715934424576"
		"215307780891987275413130336727512862819385052837277830760185901387506804552608306065908241"
		"783855338885267932726739271786353989774447530615192733928158687606439694508580301874484736"
		"094709272314051426907304113639936476817019213666615424535674858116171904571699639276577614"
		"213801684116724107932421299287292228982791080819476412086537380412846356449959561217084004"
		"453864741637567003704460826181790098804228046525618335463426065656212189885425258776864300"
		"7548424473406452344800994603779703505574522453908164907212697601"

	);
}

int main(int argc, char** argv) {
	::testing::InitGoogleTest(&argc, argv);
	return RUN_ALL_TESTS();
}